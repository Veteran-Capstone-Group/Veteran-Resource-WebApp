<?php

require_once dirname(__DIR__, 3) . "/vendor/autoload.php";
require_once dirname(__DIR__, 3) . "/Classes/autoload.php";
require_once("/etc/apache2/capstone-mysql/Secrets.php");
require_once dirname(__DIR__, 3) . "/lib/xsrf.php";
require_once dirname(__DIR__, 3) . "/lib/jwt.php";
require_once dirname(__DIR__, 3) . "/lib/uuid.php";

use VeteranResource\Resource\{Category, Resource, User};
use phpDocumentor\Reflection\Types\Resource_;

/**
 * api for resource
 *
 * @author John Johnson-Rodgers <john@johnthe.dev>
 */
//verify the session, start a session if inactive
if(session_status() !== PHP_SESSION_ACTIVE) {
	session_start();
}

$SEED_RESOURCES = [0 => ["resourceCategory" => "Disability", "resourceAddress" => "500 Gold Avenue, SW, Rm 3116", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "DAV is a nonprofit charity that provides veterans and their families free rides to medical appointments and assistance with benefit claims.", "resourceEmail" => "", "resourceImageUrl" => "https://vectors.pro/wp-content/uploads/2018/04/united-states-dav-disabled-american-veterans-logo-vector-seal.png", "resourceOrganization" => "Disabled American Veterans", "resourcePhone" => "(505) 346-4864", "resourceTitle" => "Free Ride to Hospital", "resourceUrl" => "https://www.dav.org/veterans/i-need-a-ride/"], 1 => ["resourceCategory" => "Disability", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "The program provides financial aid grants of up to $1,500 to assist with basic life needs in the form of a grant - not a loan - so no repayment is required.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "VFW - Veterns of Foreign Wars", "resourceUrl" => "https://www.vfw.org"], 2 => ["resourceCategory" => "Disability", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Community and resources for soldiers wounded after 9/11.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "WWP - Wounded Warrior Project", "resourceUrl" => "https://www.woundedwarriorproject.org"], 3 => ["resourceCategory" => "Healthcare", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "New treatment for PTSD", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "(EMDR) - Eye Movement Desensitization and Reprocessing ", "resourceUrl" => "https://www.emdr.com"], 4 => ["resourceCategory" => "Healthcare", "resourceAddress" => "2121 Osuna Rd. NE", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Ther Red Cross provides emergency social services to U.S. military members and their families.", "resourceEmail" => "", "resourceImageUrl" => "https://svg-clipart.com/thumbs/red/2U11H52-red-cross-logo-clipart.jpg", "resourceOrganization" => "American Red Cross", "resourcePhone" => "(505) 265-8514", "resourceTitle" => "American Red Cross", "resourceUrl" => "https://www.redcross.org/local/arizona-new-mexico-el-paso/about-us/locations/new-mexico.html"], 5 => ["resourceCategory" => "Mental Health", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Hotline for veterans who are going through a hard time.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "NFV - National Veterans Foundation", "resourceUrl" => "https://nvf.org"], 6 => ["resourceCategory" => "Housing", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "In collaboration with federal, state, local, and nonprofit partners, VA has undertaken an unprecedented campaign to make sure every Veteran has permanent housing.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "VA Program for Homeless Veterans", "resourceUrl" => "https://www.va.gov/homeless/"], 7 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Complete Handbook of Veteran Benifits", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "Benifits Book", "resourceUrl" => "https://www.va.gov/opa/publications/benefits_book.asp"], 8 => ["resourceCategory" => "Healthcare", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "DVBIC provides resources on traumatic brain injury (TBI) to help service members, veterans, family members and health care providers. These resources fall into two major categories: clinical tools and patient education fact sheets.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "Defense and Veteran Brain Injury Clinic", "resourceUrl" => "https://dvbic.dcoe.mil/resources"], 9 => ["resourceCategory" => "Employment", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Veterans Services works across the Federal Government to increase the number of veterans, transitioning military service members, and their families employed and retained in the civil service.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "Feds Hire Vets", "resourceUrl" => "https://www.fedshirevets.gov"], 10 => ["resourceCategory" => "Education", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "GI Bill benefits help you pay for college, graduate school, and training programs.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "G.I. Bill", "resourceUrl" => "https://www.va.gov/education/about-gi-bill-benefits/"], 11 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Heroes Walk Among Us is a 501 (c)3 nonprofit with a primary mission to help our local veteran community here in New Mexico.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "Heros Walk Among US", "resourceUrl" => "https://heroeswalkamongus.org/veterans-assistance"], 12 => ["resourceCategory" => "Healthcare", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "My HealtheVet offers you tips and tools to help you partner with your health care team, so together you may work to manage your health. ", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "My HealthVet - Access to Healthcare Records", "resourceUrl" => "https://www.myhealth.va.gov/mhv-portal-web/home"], 13 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Can help replace lost documents (DD-214 ect.)", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "National Coalition For Homeless Veterans ", "resourceUrl" => "http://www.nchv.org"], 14 => ["resourceCategory" => "Mental Health", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "To Apply for Health Benifits in Albuquerque", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "New Mexico VA Healthcare System", "resourceUrl" => "https://www.albuquerque.va.gov"], 15 => ["resourceCategory" => "Mental Health", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "For PTSD", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "Make the Connection", "resourceUrl" => "https://maketheconnection.net"], 16 => ["resourceCategory" => "Mental Health", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "For PTSD", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "National Center for PTSD", "resourceUrl" => "https://www.ptsd.va.gov"], 17 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Current Legislation for Vets in the state of New Mexico", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "United Veteran Council of New Mexico", "resourceUrl" => "http://uvcnm.org/"], 18 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Geared specifically towards Women Veterans", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "", "resourcePhone" => "", "resourceTitle" => "CWV - VA Center for Women Veterans", "resourceUrl" => "http://uvcnm.org/"], 19 => ["resourceCategory" => "Employment", "resourceAddress" => "500 Gold Avenue, SW, Rm 3116", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "DAV is a nonprofit charity that provides veterans and their families free employment resources.", "resourceEmail" => "", "resourceImageUrl" => "https://vectors.pro/wp-content/uploads/2018/04/united-states-dav-disabled-american-veterans-logo-vector-seal.png", "resourceOrganization" => "Disabled American Veterans", "resourcePhone" => "(505) 346-4864", "resourceTitle" => "National Employment Resources", "resourceUrl" => "https://www.dav.org/veterans/employment-resources/"], 20 => ["resourceCategory" => "Disability", "resourceAddress" => "500 Gold Avenue, SW", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Vocational Rehabilitation and Employment is designed to assist Veterans with service-connected disabilities to obtain suitable employment and/or achieve independent living goals.", "resourceEmail" => "", "resourceImageUrl" => "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/600px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png", "resourceOrganization" => "US Department of Veteran Affairs", "resourcePhone" => "(800) 827-1000", "resourceTitle" => "Vocational Rehabilitation and Employment", "resourceUrl" => "https://www.benefits.va.gov/VOCREHAB/VRE_Process.asp"], 21 => ["resourceCategory" => "Education", "resourceAddress" => "500 Gold Avenue, SW", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "VA's Education and Career Counseling program is a great opportunity for Servicemembers, Veterans and dependents to get personalized counseling and support to help guide their career paths, ensure most effective use of their VA benefits, and achieve their goals.", "resourceEmail" => "", "resourceImageUrl" => "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/600px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png", "resourceOrganization" => "US Department of Veteran Affairs", "resourcePhone" => "(800) 827-1000", "resourceTitle" => "Education and Career Counseling", "resourceUrl" => "https://www.benefits.va.gov/VOCREHAB/edu_voc_counseling.asp"], 22 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "500 Gold Ave. SW, Suite 3104", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "The program provides financial aid grants of up to $1,500 to assist with basic life needs in the form of a grant - not a loan - so no repayment is required.", "resourceEmail" => "unmetneeds@vfw.org", "resourceImageUrl" => "https://seeklogo.com/images/V/VFW-logo-D1627FAE12-seeklogo.com.png", "resourceOrganization" => "Veterans of Foreign Wars", "resourcePhone" => "(505) 346-4881", "resourceTitle" => "Financial Grants", "resourceUrl" => "https://www.vfw.org/assistance/financial-grants"], 23 => ["resourceCategory" => "Education", "resourceAddress" => "500 Gold Ave. SW, Suite 3104", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Veterans of Foreign Wars maintains a list of scholarships avaliable to Military inactive and active and their family members.", "resourceEmail" => "", "resourceImageUrl" => "https://seeklogo.com/images/V/VFW-logo-D1627FAE12-seeklogo.com.png", "resourceOrganization" => "Veterans of Foreign Wars", "resourcePhone" => "(505) 346-4881", "resourceTitle" => "Military Scholarships for Veterans and family members.", "resourceUrl" => "https://vfwnm.org/uploads/Documents/MILITARYSCHOLARSHIPS.pdf"], 24 => ["resourceCategory" => "Mental Health", "resourceAddress" => "500 Gold Avenue, SW", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Sometimes, life’s challenges can feel overwhelming, like there’s no way things can get better. When things feel unbearable, or if you’re having thoughts of ending your life, support is available.", "resourceEmail" => "", "resourceImageUrl" => "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/600px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png", "resourceOrganization" => "US Department of Veteran Affairs", "resourcePhone" => "800-273-8255 ext. 1", "resourceTitle" => "Suicide Prevention Hotline and Chat", "resourceUrl" => "VeteransCrisisLine.net/Chat"], 25 => ["resourceCategory" => "Mental Health", "resourceAddress" => "532 Osuna Rd NE", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Our goal is to share our love of fly fishing and cold water conservation with veterans to assist with their rehabilitation from medical conditions associated with service to the country.  All costs are covered and all equipment is provided for eligible veterans.", "resourceEmail" => "phw@newmexicotrout.org", "resourceImageUrl" => "https://www.newmexicotrout.org/wp-content/uploads/2011/03/NMT_logo2.jpg", "resourceOrganization" => "New Mexico Trout", "resourcePhone" => " 505 681-0835", "resourceTitle" => "Project Healing Waters", "resourceUrl" => "http://www.newmexicotrout.org"], 26 => ["resourceCategory" => "Food And Clothing", "resourceAddress" => "13032 Central Ave SE", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "The VIC believes in giving back and 85% of our donations are redistributed directly to the Veteran community we serve", "resourceEmail" => "", "resourceImageUrl" => "https://3j64pchzwf-flywheel.netdna-ssl.com/wp-content/uploads/2019/06/New-VIC-Logo-200t.png", "resourceOrganization" => "Veteran Integration Centers", "resourcePhone" => "(505) 265-0512", "resourceTitle" => "Free clothing and furniture for veterans", "resourceUrl" => "https://nmvic.org/"], 27 => ["resourceCategory" => "Food And Clothing", "resourceAddress" => "101 Lomas Blvd NE", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Burger King will give you a ten percent discount if you show valid military ID.", "resourceEmail" => "", "resourceImageUrl" => "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Burger_King_Logo.svg/1024px-Burger_King_Logo.svg.png", "resourceOrganization" => "Burger King", "resourcePhone" => "(505) 243-6869", "resourceTitle" => "10% discount with proper ID", "resourceUrl" => "https://bk.com"], 28 => ["resourceCategory" => "Food And Clothing", "resourceAddress" => "5640 Wyoming Blvd NE Tract B-6", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Boston Market gives a 20% discount with valid military ID", "resourceEmail" => "", "resourceImageUrl" => "https://cdn.worldvectorlogo.com/logos/boston-market-2.svg", "resourceOrganization" => "Boston Market", "resourcePhone" => "(505) 857-0700", "resourceTitle" => "20% Discount for Veterans", "resourceUrl" => "https://www.bostonMarket.com"], 29 => ["resourceCategory" => "Miscellaneous", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Veterans who receive the Veterans Pension and/or Survivors Pensions benefits are now eligible for a free cell phone through the national Lifeline Program.", "resourceEmail" => "", "resourceImageUrl" => "", "resourceOrganization" => "National Lifeline Association", "resourcePhone" => "", "resourceTitle" => "Free Cell Phone for Vets", "resourceUrl" => "https://www.nalalifeline.org/lifeline-news/free-cell-phones-for-veterans-benefits-lifeline-eligibility/"], 30 => ["resourceCategory" => "Housing", "resourceAddress" => "13032 Central Ave SE", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "The VIC offers temporary housing for homeless and low income veterans", "resourceEmail" => "", "resourceImageUrl" => "https://3j64pchzwf-flywheel.netdna-ssl.com/wp-content/uploads/2019/06/New-VIC-Logo-200t.png", "resourceOrganization" => "Veteran Integration Centers", "resourcePhone" => "(505) 265-0512", "resourceTitle" => "Temporary Housing", "resourceUrl" => "https://nmvic.org/"], 31 => ["resourceCategory" => "Housing", "resourceAddress" => "", "resourceApprovalStatus" => "TRUE", "resourceDescription" => "Homes For Our Troops donates newly constructed, specially adapted custom homes designed for Veterans. Must have a  SAH Grant to apply.", "resourceEmail" => "Intake@hfotusa.org", "resourceImageUrl" => "https://www.hfotusa.org/wp-content/uploads/2019/02/HFOT15thAnniversary-Logo.jpg", "resourceOrganization" => "Homes For Our Troops", "resourcePhone" => "", "resourceTitle" => "Homes for SAH or SHA Vets", "resourceUrl" => "https://www.hfotusa.org/help/"]];

$SEED_CATEGORIES = [0 => "Education", 1 => "Employment", 2 => "Housing", 3 => "Food and Clothing", 4 => "Mental Health", 5 => "Healthcare", 6 => "Disability", 7 => "Miscellaneous"];

$CATEGORY_IDS = [];
$UserId = "a144a25fb6144342ae3945cae3cc6d22";
//prepare an empty reply
$reply = new stdClass();
$reply->status = 200;
$reply->data = null;

try {
	//grab the mySQL connection
	$secrets = new \Secrets("/etc/apache2/capstone-mysql/veteran.ini");
	$pdo = $secrets->getPdoObject();

	//determine which HTTP method was used
	$method = $_SERVER["HTTP_X_HTTP_METHOD"] ?? $_SERVER["REQUEST_METHOD"];

	if($method === "POST") {
		for($i = 0; $i < count($SEED_CATEGORIES); $i++) {
			$uuid = generateUuidV4();
			$category = new Category($uuid, $SEED_CATEGORIES[$i]);
			$category->insert($pdo);
			$CATEGORY_IDS[$SEED_CATEGORIES[$i]] = $uuid;
		}


		//seed data for resources
		$requestContent = ['{"resourceCategory": "Disability", "resourceAddress": "500 Gold Avenue, SW, Rm 3116", "resourceApprovalStatus": "TRUE", "resourceDescription": "DAV is a nonprofit charity that provides veterans and their families free rides to medical appointments and assistance with benefit claims.", "resourceEmail": "", "resourceImageUrl": "https://vectors.pro/wp-content/uploads/2018/04/united-states-dav-disabled-american-veterans-logo-vector-seal.png", "resourceOrganization": "Disabled American Veterans", "resourcePhone": "(505) 346-4864", "resourceTitle": "Free Ride to Hospital", "resourceUrl": "https://www.dav.org/veterans/i-need-a-ride/"}', '{"resourceCategory": "Disability", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "The program provides financial aid grants of up to $1,500 to assist with basic life needs in the form of a grant - not a loan - so no repayment is required.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "VFW - Veterns of Foreign Wars", "resourceUrl": "https://www.vfw.org"}', '{"resourceCategory": "Disability", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Community and resources for soldiers wounded after 9/11.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "WWP - Wounded Warrior Project", "resourceUrl": "https://www.woundedwarriorproject.org"}', '{"resourceCategory": "Healthcare", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "New treatment for PTSD", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "(EMDR) - Eye Movement Desensitization and Reprocessing ", "resourceUrl": "https://www.emdr.com"}', '{"resourceCategory": "Healthcare", "resourceAddress": "2121 Osuna Rd. NE", "resourceApprovalStatus": "TRUE", "resourceDescription": "Ther Red Cross provides emergency social services to U.S. military members and their families.", "resourceEmail": "", "resourceImageUrl": "https://svg-clipart.com/thumbs/red/2U11H52-red-cross-logo-clipart.jpg", "resourceOrganization": "American Red Cross", "resourcePhone": "(505) 265-8514", "resourceTitle": "American Red Cross", "resourceUrl": "https://www.redcross.org/local/arizona-new-mexico-el-paso/about-us/locations/new-mexico.html"}', '{"resourceCategory": "Mental Health", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Hotline for veterans who are going through a hard time.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "NFV - National Veterans Foundation", "resourceUrl": "https://nvf.org"}', '{"resourceCategory": "Housing", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "In collaboration with federal, state, local, and nonprofit partners, VA has undertaken an unprecedented campaign to make sure every Veteran has permanent housing.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "VA Program for Homeless Veterans", "resourceUrl": "https://www.va.gov/homeless/"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Complete Handbook of Veteran Benifits", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "Benifits Book", "resourceUrl": "https://www.va.gov/opa/publications/benefits_book.asp"}', '{"resourceCategory": "Healthcare", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "DVBIC provides resources on traumatic brain injury (TBI) to help service members, veterans, family members and health care providers. These resources fall into two major categories: clinical tools and patient education fact sheets.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "Defense and Veteran Brain Injury Clinic", "resourceUrl": "https://dvbic.dcoe.mil/resources"}', '{"resourceCategory": "Employment", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Veterans Services works across the Federal Government to increase the number of veterans, transitioning military service members, and their families employed and retained in the civil service.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "Feds Hire Vets", "resourceUrl": "https://www.fedshirevets.gov"}', '{"resourceCategory": "Education", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "GI Bill benefits help you pay for college, graduate school, and training programs.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "G.I. Bill", "resourceUrl": "https://www.va.gov/education/about-gi-bill-benefits/"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Heroes Walk Among Us is a 501 (c)3 nonprofit with a primary mission to help our local veteran community here in New Mexico.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "Heros Walk Among US", "resourceUrl": "https://heroeswalkamongus.org/veterans-assistance"}', '{"resourceCategory": "Healthcare", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "My HealtheVet offers you tips and tools to help you partner with your health care team, so together you may work to manage your health. ", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "My HealthVet - Access to Healthcare Records", "resourceUrl": "https://www.myhealth.va.gov/mhv-portal-web/home"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Can help replace lost documents (DD-214 ect.)", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "National Coalition For Homeless Veterans ", "resourceUrl": "http://www.nchv.org"}', '{"resourceCategory": "Mental Health", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "To Apply for Health Benifits in Albuquerque", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "New Mexico VA Healthcare System", "resourceUrl": "https://www.albuquerque.va.gov"}', '{"resourceCategory": "Mental Health", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "For PTSD", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "Make the Connection", "resourceUrl": "https://maketheconnection.net"}', '{"resourceCategory": "Mental Health", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "For PTSD", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "National Center for PTSD", "resourceUrl": "https://www.ptsd.va.gov"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Current Legislation for Vets in the state of New Mexico", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "United Veteran Council of New Mexico", "resourceUrl": "http://uvcnm.org/"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Geared specifically towards Women Veterans", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "", "resourcePhone": "", "resourceTitle": "CWV - VA Center for Women Veterans", "resourceUrl": "http://uvcnm.org/"}', '{"resourceCategory": "Employment", "resourceAddress": "500 Gold Avenue, SW, Rm 3116", "resourceApprovalStatus": "TRUE", "resourceDescription": "DAV is a nonprofit charity that provides veterans and their families free employment resources.", "resourceEmail": "", "resourceImageUrl": "https://vectors.pro/wp-content/uploads/2018/04/united-states-dav-disabled-american-veterans-logo-vector-seal.png", "resourceOrganization": "Disabled American Veterans", "resourcePhone": "(505) 346-4864", "resourceTitle": "National Employment Resources", "resourceUrl": "https://www.dav.org/veterans/employment-resources/"}', '{"resourceCategory": "Disability", "resourceAddress": "500 Gold Avenue, SW", "resourceApprovalStatus": "TRUE", "resourceDescription": "Vocational Rehabilitation and Employment is designed to assist Veterans with service-connected disabilities to obtain suitable employment and/or achieve independent living goals.", "resourceEmail": "", "resourceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/600px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png", "resourceOrganization": "US Department of Veteran Affairs", "resourcePhone": "(800) 827-1000", "resourceTitle": "Vocational Rehabilitation and Employment", "resourceUrl": "https://www.benefits.va.gov/VOCREHAB/VRE_Process.asp"}', '{"resourceCategory": "Education", "resourceAddress": "500 Gold Avenue, SW", "resourceApprovalStatus": "TRUE", "resourceDescription": "VAs Education and Career Counseling program is a great opportunity for Servicemembers, Veterans and dependents to get personalized counseling and support to help guide their career paths, ensure most effective use of their VA benefits, and achieve their goals.", "resourceEmail": "", "resourceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/600px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png", "resourceOrganization": "US Department of Veteran Affairs", "resourcePhone": "(800) 827-1000", "resourceTitle": "Education and Career Counseling", "resourceUrl": "https://www.benefits.va.gov/VOCREHAB/edu_voc_counseling.asp"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "500 Gold Ave. SW, Suite 3104", "resourceApprovalStatus": "TRUE", "resourceDescription": "The program provides financial aid grants of up to $1,500 to assist with basic life needs in the form of a grant - not a loan - so no repayment is required.", "resourceEmail": "unmetneeds@vfw.org", "resourceImageUrl": "https://seeklogo.com/images/V/VFW-logo-D1627FAE12-seeklogo.com.png", "resourceOrganization": "Veterans of Foreign Wars", "resourcePhone": "(505) 346-4881", "resourceTitle": "Financial Grants", "resourceUrl": "https://www.vfw.org/assistance/financial-grants"}', '{"resourceCategory": "Education", "resourceAddress": "500 Gold Ave. SW, Suite 3104", "resourceApprovalStatus": "TRUE", "resourceDescription": "Veterans of Foreign Wars maintains a list of scholarships avaliable to Military inactive and active and their family members.", "resourceEmail": "", "resourceImageUrl": "https://seeklogo.com/images/V/VFW-logo-D1627FAE12-seeklogo.com.png", "resourceOrganization": "Veterans of Foreign Wars", "resourcePhone": "(505) 346-4881", "resourceTitle": "Military Scholarships for Veterans and family members.", "resourceUrl": "https://vfwnm.org/uploads/Documents/MILITARYSCHOLARSHIPS.pdf"}', '{"resourceCategory": "Mental Health", "resourceAddress": "500 Gold Avenue, SW", "resourceApprovalStatus": "TRUE", "resourceDescription": "Sometimes, life’s challenges can feel overwhelming, like there’s no way things can get better. When things feel unbearable, or if you’re having thoughts of ending your life, support is available.", "resourceEmail": "", "resourceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/600px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png", "resourceOrganization": "US Department of Veteran Affairs", "resourcePhone": "800-273-8255 ext. 1", "resourceTitle": "Suicide Prevention Hotline and Chat", "resourceUrl": "VeteransCrisisLine.net/Chat"}', '{"resourceCategory": "Mental Health", "resourceAddress": "532 Osuna Rd NE", "resourceApprovalStatus": "TRUE", "resourceDescription": "Our goal is to share our love of fly fishing and cold water conservation with veterans to assist with their rehabilitation from medical conditions associated with service to the country.  All costs are covered and all equipment is provided for eligible veterans.", "resourceEmail": "phw@newmexicotrout.org", "resourceImageUrl": "https://www.newmexicotrout.org/wp-content/uploads/2011/03/NMT_logo2.jpg", "resourceOrganization": "New Mexico Trout", "resourcePhone": " 505 681-0835", "resourceTitle": "Project Healing Waters", "resourceUrl": "http://www.newmexicotrout.org"}', '{"resourceCategory": "Food And Clothing", "resourceAddress": "13032 Central Ave SE", "resourceApprovalStatus": "TRUE", "resourceDescription": "The VIC believes in giving back and 85% of our donations are redistributed directly to the Veteran community we serve", "resourceEmail": "", "resourceImageUrl": "https://3j64pchzwf-flywheel.netdna-ssl.com/wp-content/uploads/2019/06/New-VIC-Logo-200t.png", "resourceOrganization": "Veteran Integration Centers", "resourcePhone": "(505) 265-0512", "resourceTitle": "Free clothing and furniture for veterans", "resourceUrl": "https://nmvic.org/"}', '{"resourceCategory": "Food And Clothing", "resourceAddress": "101 Lomas Blvd NE", "resourceApprovalStatus": "TRUE", "resourceDescription": "Burger King will give you a ten percent discount if you show valid military ID.", "resourceEmail": "", "resourceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Burger_King_Logo.svg/1024px-Burger_King_Logo.svg.png", "resourceOrganization": "Burger King", "resourcePhone": "(505) 243-6869", "resourceTitle": "10% discount with proper ID", "resourceUrl": "https://bk.com"}', '{"resourceCategory": "Food And Clothing", "resourceAddress": "5640 Wyoming Blvd NE Tract B-6", "resourceApprovalStatus": "TRUE", "resourceDescription": "Boston Market gives a 20% discount with valid military ID", "resourceEmail": "", "resourceImageUrl": "https://cdn.worldvectorlogo.com/logos/boston-market-2.svg", "resourceOrganization": "Boston Market", "resourcePhone": "(505) 857-0700", "resourceTitle": "20% Discount for Veterans", "resourceUrl": "https://www.bostonMarket.com"}', '{"resourceCategory": "Miscellaneous", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Veterans who receive the Veterans Pension and/or Survivors Pensions benefits are now eligible for a free cell phone through the national Lifeline Program.", "resourceEmail": "", "resourceImageUrl": "", "resourceOrganization": "National Lifeline Association", "resourcePhone": "", "resourceTitle": "Free Cell Phone for Vets", "resourceUrl": "https://www.nalalifeline.org/lifeline-news/free-cell-phones-for-veterans-benefits-lifeline-eligibility/"}', '{"resourceCategory": "Housing", "resourceAddress": "13032 Central Ave SE", "resourceApprovalStatus": "TRUE", "resourceDescription": "The VIC offers temporary housing for homeless and low income veterans", "resourceEmail": "", "resourceImageUrl": "https://3j64pchzwf-flywheel.netdna-ssl.com/wp-content/uploads/2019/06/New-VIC-Logo-200t.png", "resourceOrganization": "Veteran Integration Centers", "resourcePhone": "(505) 265-0512", "resourceTitle": "Temporary Housing", "resourceUrl": "https://nmvic.org/"}', '{"resourceCategory": "Housing", "resourceAddress": "", "resourceApprovalStatus": "TRUE", "resourceDescription": "Homes For Our Troops donates newly constructed, specially adapted custom homes designed for Veterans. Must have a  SAH Grant to apply.", "resourceEmail": "Intake@hfotusa.org", "resourceImageUrl": "https://www.hfotusa.org/wp-content/uploads/2019/02/HFOT15thAnniversary-Logo.jpg", "resourceOrganization": "Homes For Our Troops", "resourcePhone": "", "resourceTitle": "Homes for SAH or SHA Vets", "resourceUrl": "https://www.hfotusa.org/help/"}'];

		//loops through resource
		for($i = 0; $i < count($requestContent); $i++) {

			//Decodes content and stores result in $requestContent
			$requestObject = json_decode($requestContent[$i]);

			//create new resource and insert it into the database
			$resource = new Resource(generateUuidV4(), $CATEGORY_IDS[$requestObject->resourceCategory], $UserId, $requestObject->resourceAddress, true, $requestObject->resourceDescription, $requestObject->resourceEmail, $requestObject->resourceImageUrl, $requestObject->resourceOrganization, $requestObject->resourcePhone, $requestObject->resourceTitle, $requestObject->resourceUrl);
			$resource->insert($pdo);
		}
		//update reply
		$reply->message = "Database has been populated!";
	} else {
		throw (new InvalidArgumentException("Invalid HTTP method request", 405));
	}
	//update the $reply->status $reply->message
} catch(\Exception|\TypeError $exception) {
	$reply->status = $exception->getCode();
	$reply->message = $exception->getMessage();
}
header("Content-type: application/json");
echo json_encode($reply);